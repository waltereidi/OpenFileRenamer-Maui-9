@using CommunityToolkit.Maui.Storage
@using Presentation.Maui.Service
@using Presentation.Maui.ValueObjects
@inherits LayoutComponentBase
@inject NavigationManager Navigation

<div class="container p-3"> 
        
    <div class="container-directoryChooser">
        <button class="btn btn-sm btn-primary w-100" @onclick="ChooseDirectory_Click">ChooseDirectoryButtonText</button>

        @if(CurrentDirectory != null )
        {
            <div class="alert-primary">
                <p>Current directory : @CurrentDirectory </p>
            </div>
        }
        
    </div>
    <div class="container-fileTable">
        <main>
            @Body
        </main>
    </div>
    
    
</div>

@code {
    public async void ChooseDirectory_Click()
    {
        var result = await FolderPicker.Default.PickAsync();
        if (result.IsSuccessful)
        {
            DirectoryManagerService.SetDirectory(result.Folder.Path);
            
            Navigation.NavigateTo(
                DirectoryManagerService.IsValid() 
                    ? "/DataSelection"
                    : "/"
            );
        }


    }

}
