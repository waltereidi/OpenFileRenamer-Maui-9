@using CommunityToolkit.Maui.Storage
@using Presentation.Maui.Service
@using Presentation.Maui.ValueObjects
@inherits LayoutComponentBase
@inject NavigationManager Navigation
@using BlazorBootstrap;

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<!-- Add chart.js reference if chart components are used in your application. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js" integrity="sha512-ZwR1/gSZM3ai6vCdI+LVF1zSq/5HznD3ZSTk7kajkaj4D292NLuduDCO1c/NT8Id+jE58KYLKT7hXnbtryGmMg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Add chartjs-plugin-datalabels.min.js reference if chart components with data label feature is used in your application. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js" integrity="sha512-JPcRR8yFa8mmCsfrw4TNte1ZvF1e3+1SdGMslZvmrzDYxS69J7J49vkFL8u6u8PlPJK+H3voElBtUCzaXj+6ig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Add sortable.js reference if SortableList component is used in your application. -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
<script src="_content/Blazor.Bootstrap/blazor.bootstrap.js"></script>

<div class="container p-3"> 
        
    <div class="container-directoryChooser">
        <button class="btn btn-sm btn-primary w-100" @onclick="ChooseDirectory_Click">ChooseDirectoryButtonText</button>

        @if(CurrentDirectory != null )
        {
            <div class="alert-primary">
                <p>Current directory : @CurrentDirectory </p>
            </div>
        }
        
    </div>
    <div class="container-fileTable">
        <main>
            @Body
        </main>
    </div>
    
    
</div>

@code {
    public async void ChooseDirectory_Click()
    {
        var result = await FolderPicker.Default.PickAsync();
        if (result.IsSuccessful)
        {
                DirectoryManagerService.SetDirectory(result.Folder.Path);
                Navigation.NavigateTo($"/DataSelection");
        }


    }

}
